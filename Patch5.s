;
;
;	Patch5.s
;	From address 0x01BAC000
;	From the MP2100 ROM 717260
;
;	Author		Jonathan Kipling Knight
;	Created		1/1/2001
;	Modified	1/1/2001
;
;

	INCLUDE project.a
	INCLUDE bytecode.a
	INCLUDE package.a
	INCLUDE page.a
	
	GBLA reORG	; to produce a false ORG in branches
	
	AREA Patch5, CODE, ABS
	ORG	BaseAddrPatch5

L01BAC000
	ObjectHeader 0x24, kFrameObject
	PointerRef L01BAC024
	PointerRef 0x0063FA3C
	NILRef
	PointerRef L01BAC04C
	PointerRef L01BAC100
	PointerRef L01BAC1C0
	PointerRef L01BAC240
L01BAC024
	ObjectHeader 0x28, kArrayObject
	IntegerRef 4
	NILRef
	PointerRef 0x003BB31C
	PointerRef 0x00471F04
	PointerRef 0x00428774
	PointerRef 0x004718F0
	PointerRef 0x00471FD8
	PointerRef 0x0046F690
L01BAC04C
	FnObject L01BAC06C, L01BAC0D0, 0, 1
L01BAC06C
	ObjectHeader 0x61, kBinaryObject
	PointerRef 0x00535F6C
	DCD	0x7B7024C0
	DCD	0xC46F0012
	DCD	0x19AA031B
	DCD	0x221C2B5F
	DCD	0x00547B70
	DCD	0x270008C0
	DCD	0xC46F0024
	DCD	0x031D221C
	DCD	0x2B5F0054
	DCD	0x761F0007
	DCD	0x9122C66F
	DCD	0x003D761F
	DCD	0x000791C7
	DCD	0x00127BC7
	DCD	0x000B5F00
	DCD	0x3E226F00
	DCD	0x53761F00
	DCD	0x08761F00
	DCD	0x07917BC2
	DCD	0xC7001399
	DCD	0x5F005422
	Return
	BinaryFiller 0xBA
L01BAC0D0
	ObjectHeader 0x30, kArrayObject
	PointerRef 0x00629434
	PointerRef 0x00471EE4
	PointerRef L01BAC2D4
	PointerRef 0x00471F04
	PointerRef 0x00471FD8
	PointerRef 0x003B0F04
	PointerRef 0x00471FFC
	PointerRef 0x003BAB0C
	PointerRef 0x00471D08
	PointerRef 0x00471CE8
L01BAC100
	FnObject L01BAC120, L01BAC17C, 2, 3
L01BAC120
	ObjectHeader (L01BAC17C-{PC}), kBinaryObject
	PointerRef 0x00535F6C
	DCD	0x7C18192A
	DCD	0x6F003C7C
	DCD	0x7D031A3A
	DCD	0xA700077F
	DCD	0x00076F00
	DCD	0x307F0007
	DCD	0xC70013A6
	DCD	0x7E1B7D98
	DCD	0x7E1C7B98
	DCD	0x751E7E98
	DCD	0x7E1F0007
	DCD	0x91AF0008
	DCD	0x031F0009
	DCD	0x221F000A
	DCD	0x2B5F004F
	DCD	0x7B7C7D03
	DCD	0x1F000B3B
	DCD	0x00031F00
	DCD	0x0C38031F
	DCD	0x000D3902
L01BAC17C
	ObjectHeader 0x44, kArrayObject 
	PointerRef 0x00629434
	PointerRef L01BAC2F8
	PointerRef 0x003B27CC
	PointerRef 0x00471CAC
	PointerRef 0x00471CCC
	PointerRef 0x003C3E9C
	PointerRef 0x003BAB0C
	PointerRef 0x00471CE8
	PointerRef 0x004716F4
	PointerRef 0x00471F04
	PointerRef 0x00471FD8
	PointerRef 0x003B0F04
	PointerRef 0x00472020
	PointerRef 0x00428758
	PointerRef 0x0041D6C8
L01BAC1C0
	FnObject L01BAC1E0, L01BAC20C, 1, 0
L01BAC1E0
	ObjectHeader 0x2A, kBinaryObject
	PointerRef 0x00535F6C
	DCD	0x22A37B18
	DCD	0x711A1B8B
	DCD	0xC7001603
	DCD	0x1C38031D
	DCD	0x1E1F0007 
	DCD	0x7700081F
	DCD	0x00093F00
	DCD	0x0702BABA
L01BAC20C
	ObjectHeader 0x34, kArrayObject
	PointerRef 0x00629434
	PointerRef L01BAC318
	PointerRef 0x00471F04
	PointerRef L01BAC32C
	PointerRef 0x003B0038
	PointerRef 0x00428758
	PointerRef L01BAC33C
	PointerRef L01BAC360
	PointerRef L01BAC37C
	PointerRef 0x003BA4A8
	PointerRef 0x00470268
L01BAC240
	FnObject L01BAC260, L01BAC2A4, 2, 2
L01BAC260
	ObjectHeader 0x42, kBinaryObject
	PointerRef 0x00535F6C
	DCD	0x7B22C66F
	DCD	0x000E7B18
	DCD	0x192AC55F
	DCD	0x000F226F
	DCD	0x00347C6F 
	DCD	0x001A7C5F
	DCD	0x001B1AA5
	DCD	0x7B1B741D
	DCD	0x7D1E8DC7
	DCD	0x0016A67E
	DCD	0x741F0007
	DCD	0x031F0008
	DCD	0x3B5F0035
	DCD	0x2202BABA
L01BAC2A4
	ObjectHeader 0x30, kArrayObject
	PointerRef 0x00629434
	PointerRef L01BAC39C
	PointerRef 0x003B7FBC
	PointerRef L01BAC3AC
	PointerRef L01BAC3BC
	PointerRef 0x00471F04
	PointerRef L01BAC32C
	PointerRef 0x003B0038
	PointerRef 0x004716D8
	PointerRef 0x004718F0
L01BAC2D4
	UnicodeCStringObject ("LaserWriter")
L01BAC2F8
	UnicodeCStringObject ("(network)")
L01BAC318
	UnicodeCStringObject ("=:")
L01BAC32C
	UnicodeCStringObject ("@")
L01BAC33C
	UnicodeCStringObject ("Use printer")
L01BAC360
	UnicodeCStringObject ("Printer")
L01BAC37C
	UnicodeCStringObject ("printers")
L01BAC39C
	UnicodeCStringObject ("")
L01BAC3AC
	UnicodeCStringObject ("*")
L01BAC3BC
	UnicodeCStringObject (":")

L01BAC3CC
	LDR	R12,D0
	CMP	R12,LR
	MOVEQ	R0,#4
	B	0x00334450
D0	DCB	0,51,62,132
D1	DCB	0,51,32,96
	LDR	R12,D1
	CMP	R12,LR
	ADDEQ	LR,LR,#8
	B	0x0033208C
	MOV	R12,sp
	STMFD	sp!,{R4-R12,LR,PC}
	SUB	R11,R12,#4

L01BAC400
	MOV	R4,R0
	SUB	sp,sp,#4
	MOV	R7,#2
	LDR	R9,[R0,#24]
	LDR	R0,[R0,#16]
	AND	R1,R0,#255
	MOV	R2,#4
	STR	R2,[sp]
	LDR	R5,D2
	CMP	R1,#8
	LDREQ	R5,D3
	BEQ	L2
	BGT	L1
	TEQ	R1,#1
	BEQ	L24
	TEQ	R1,#2
	BNE	L2
	LDR	R5,D4
	MOV	R7,#1
	MOV	R2,#2
	STR	R2,[sp]
	B	L2
D2	DCD	0x01B56B3C
D3	DCD	0x01B58C38
D4	DCD	0x01B56B50
D5	DCD	0x01B56B40
D10	DCD	0x01B56B4C
D11	DCD	0x01B56B48
D12	DCD	0x01B56B44
L1	TEQ	R1,#16
	LDREQ	R5,D5
	BEQ	L3

L01BAC480
	TEQ	R1,#32
	BNE	L2
	TST	R0,#0x02000000
	LDRNE	R5,D12
	BNE	L3
	TST	R0,#0x04000000
	LDREQ	R5,D11
	LDRNE	R5,D10
L3	MOV	R9,#0
L2	SUB	sp,sp,#4
	MOV	R0,R4
	BL	0x01C0C608
	MOV	R6,R0
	MOV	R8,R0
	LDR	R0,[R4,#12]
	MOV	R0,R0,ASR #16
	LDR	R1,[R4,#8]
	SUB	R0,R0,R1,ASR #16
	LDR	R10,[R4,#4]
	MOV	R10,R10,ASR #16
	LDR	R1,[R4,#14]
	MOV	R1,R1,ASR #16
	LDR	R2,[R4,#10]
	SUB	R1,R1,R2,ASR #16
	ADDS	R1,R1,#7
	ADDMI	R1,R1,#7
	MOV	R1,R1,ASR #3
	MOV	R7,R1,LSL R7
	SUB	R1,R0,#1
	CMP	R0,#0
	STR	R1,[sp]
	BLE	L25

L01BAC500
L23	MOV	R2,R10
	MOV	R1,R9
	MOV	R0,R6
	MOV	LR,PC
	MOV	PC,R5
	MOV	R2,R7
	MOV	R1,R8
	MOV	R0,R6
	BL	0x01BDEF54
	ADD	R6,R6,R10
	ADD	R8,R8,R7
	LDR	R0,[sp]
	SUB	R1,R0,#1
	CMP	R0,#0
	STR	R1,[sp]
	BGT	L23
L25	STRB	R7,[R4,#5]
	MOV	R0,R7,ASR #8
	STRB	R0,[R4,#4]
	LDR	R0,[R4,#16]
	BIC	R0,R0,#255
	LDR	R2,[sp,#4]
	ORR	R0,R0,R2
	STR	R0,[R4,#16]!
	ADD	sp,sp,#4
L24	LDMEA	R11,{R4-R11,sp,PC}
	LDR	R12,D9
	CMP	R12,LR
	BNE	0x0004173C
	MOV	R12,sp
	STMFD	sp!,{R5-R9,R12,LR}
	MOV	R9,R12

L01BAC580
	MOV	R5,R0
	MOV	R6,R1
	MOV	R7,R2
	SUB	sp,sp,#8
	BL	0x01BC2140
	BL	0x01BC214C
	ADD	R8,sp,#4
	STR	R0,[R8]
	LDR	R0,[R9,#72]
	AND	R0,R0,#255
	CMP	R0,#4
	MOVHI	R0,#4
	MOV	R0,R0,LSL #2
	BL	0x01BC214C
	STR	R0,[sp]
	MOV	R2,sp
	LDR	R1,D6
	MOV	R0,R8
	BL	0x01BC6368
	LDR	R0,[sp]
	BL	0x01BC31BC
	MOV	R0,R5
	MOV	R1,R6
	MOV	R2,R7
	MOV	R3,R8
	BL	0x0004173C
	MOV	R12,R9
	LDMEA	R12,{R5-R9,sp,PC}
D9	DCD	0x00330B64
D6	DCD	0x006828C8
	DCD	0xDEADC0DE
	DCD	0xDEADC0DE 

L01BAC600
;reORG  SETA	L01BAC600 - 0x01BAC600  ; OK to leave out
	B	0x00251788
	B	0x00195408
	B	0x002725FC
	B	0x002559F8
	B	0x003AE508
	B	0x002556D8
	B	0x002558EC
	B	0x00251B28
	B	0x00251B4C
	B	0x01C1176C ; patch in Patch6 from 
	B	0x0038A010
	B	0x0038A104
	B	0x0038A274
	B	0x0038A464
	B	0x0038A36C
	B	0x0038A1F8
	B	0x0038A088
	B	0x0038A17C
	B	0x0038A3E8
	B	0x0038A2F0
	B	0x00251940
	B	0x00251874
	B	0x000CF7C0
	B	0x00251460
	B	0x002510D8
	B	0x002D45DC
	B	0x002D4898
	B	0x002D4864
	B	0x00251828
	B	0x00255B68
	B	0x00025B04
	B	0x000CB428

L01BAC680
	MOV	R12,sp
	STMFD	sp!,{R4,R5,R11,R12,LR,PC}
	SUB	R11,R12,#4
	MOV	R4,R0
	MOV	R5,R1
	MOV	R0,R1
	STR	R1,[R4,#636]
	MOV	R3,R1
	MVN	R2,#0
	MOV	R1,#0
	LDR	R3,[R3]
	MOV	LR,PC
	ADD	PC,R3,#56
	MOV	R0,R5
	LDR	R1,[R5]
	MOV	LR,PC
	ADD	PC,R1,#44
	STR	R0,[R4,#640]
	LDRB	R0,[R4,#648]
	TEQ	R0,#0
	BNE	L26
	LDRB	R0,[R4,#649]
	TEQ	R0,#0
	BEQ	L26
	LDR	R0,[R4,#644]
	TEQ	R0,#0
	BNE	L26
	LDR	R0,[R4,#1200]
	BL	L28
	TEQ	R0,#0
	BNE	L27
	MOV	R0,R4

L01BAC700
	MOV	R2,#0
	MOV	R1,#0
	LDMEA	R11,{R4,R5,R11,sp,LR}
	B	0x01A2F788
L27	MOV	R0,#1
	STR	R0,[R4,#644]
L26	MOV	R1,R5
	MOV	R0,R4
	LDMEA	R11,{R4,R5,R11,sp,LR}
	B	0x000EEBCC
	MOV	R12,sp
	STMFD	sp!,{R4,R5,R11,R12,LR,PC}
	SUB	R11,R12,#4
	MOV	R4,R0
	LDR	R0,D13
	TEQ	R2,R0
	LDRNE	R12,D14
	TEQNE	R2,R12
	MOVNE	R0,R4
	LDMNEEA	R11,{R4,R5,R11,sp,LR}
	BNE	0x000EE254
	CMP	R3,#0x00000300
	MVNCC	R0,#2
	LDMCCEA	R11,{R4,R5,R11,sp,PC}
	TEQ	R2,R0
	MOV	R5,R1
	BNE	L7
	LDR	R0,[R4,#1200]!
	BL	L28
	B	L29
L7	LDR	R0,[R4,#1200]
	ADD	R0,R0,#120

L01BAC780
	BL	0x01A36B64
	STR	R0,[R5,#16]
	LDR	R0,[R4,#1200]!
	ADD	R0,R0,#120
	BL	0x01A36B60
L29	STR	R0,[R5,#12]!
	MOV	R0,#0
	LDMEA	R11,{R4,R5,R11,sp,PC}
D13	DCB	"sbav"
D14	DCB	"irpb"
L28	MOV	R12,sp
	STMFD	sp!,{R4,R5,R11,R12,LR,PC}
	SUB	R11,R12,#4
	MOV	R4,R0
	MOV	R5,#0
	LDRB	R0,[R0,#52]
	TEQ	R0,#6
	BNE	L30
	LDRB	R0,[R4,#140]
	TEQ	R0,#0
	BNE	L31
	LDR	R0,[R4,#128]
	TEQ	R0,#0
	BEQ	L31
	LDR	R1,[R0]
	MOV	LR,PC
	ADD	PC,R1,#44
	MOV	R5,R0
	LDR	R1,[R4,#128]
	MOV	R0,R1
	LDR	R1,[R1]
	MOV	LR,PC

L01BAC800
	ADD	PC,R1,#60
	SUB	R5,R5,R0
L31	LDR	R0,[R4,#24]!
	LDR	R1,[R4,#24]!
	BL	L8
	ADD	R5,R0,R5
L30	MOV	R0,R5
	LDMEA	R11,{R4,R5,R11,sp,PC}
L8	LDR	R0,[R0,#24]
	MOV	R12,sp
	STMFD	sp!,{R4-R7,R11,R12,LR,PC}
	SUB	R11,R12,#4
	MOV	R4,R0
	MOV	R5,R1
	SUB	sp,sp,#28
	MOV	R7,#0
	LDR	R1,[R0,#44]
	MOV	R0,sp
	BL	0x01BE31E4
	MOV	R0,sp
	BL	0x01BE73F8
L33	MOV	R6,R0
	MOV	R0,sp
	BL	0x01BEA578
	TEQ	R0,#0
	BEQ	L32
	SUB	sp,sp,#12
	MOV	R3,sp
	ADD	R2,sp,#4
	MOV	R1,R6
	MOV	R0,R4
	BL	0x01A339B0

L01BAC880
	ADD	R1,sp,#4
	MOV	R0,R5
	MOV	R2,#1
	BL	0x01A35AC4
	TEQ	R0,#0
	BEQ	L9
	LDR	R1,[R6,#16]!
	LDR	R0,[R6,#8]
	SUB	R0,R0,R1
	LDR	R1,[sp]
	SUB	R0,R0,R1
	ADD	R7,R0,R7
L9	ADD	sp,sp,#12
	MOV	R0,sp
	BL	0x01BEB5A0
	B	L33
L32	MOV	R0,sp
	MOV	R1,#0
	BL	0x01BE4268
	MOV	R0,R7
	LDMEA	R11,{R4-R7,R11,sp,PC}
	LDRB	R1,[R0,#52]
	TEQ	R1,#1
	MOVEQ	R1,#2
	BEQ	L34
	TEQ	R1,#2
	MOVEQ	R1,#3
	BEQ	L34
	TEQ	R1,#4
	MOVEQ	R1,#5
	BEQ	L34
	TEQ	R1,#6

L01BAC900
	BNE	L10
	MOV	R1,#7
L34	STRB	R1,[R0,#52]
L10	B	0x01C10824
	MOV	R12,sp
	STMFD	sp!,{R4,R5,R11,R12,LR,PC}
	SUB	R11,R12,#4
	MOV	R4,R0
	SUB	sp,sp,#4
	LDR	R0,[R0,#16]
	MOV	R2,sp
	MOV	R1,#0
	BL	0x01A6E710
	LDR	R0,[sp]
	TEQ	R0,#0
	MOVNE	R0,#0
	MOVEQ	R0,#1
	AND	R0,R0,#255
	LDRB	R12,[R4,#52]
	MOV	R3,#6
	MOV	R1,#2
	MOV	R2,#0x00009000
	SUB	R2,R2,#4
	MOV	R5,#0
	CMP	R12,#7
	ADDLS	PC,PC,R12,LSL #2
	B	L36
	B	L35
	B	L35
	B	L37
	B	L38
	B	L39

L01BAC980
	B	L41
	B	L40
	TEQ	R0,#0
	STRNEB	R3,[R4,#52]
	BNE	L40
	B	L11
L35	TEQ	R0,#0
	MOVNE	R0,#1
	BNE	L12
L11	STRB	R5,[R4,#52]
	LDR	R0,[R4,#24]
	LDR	R1,[R4,#44]
	BL	0x01A6A544
L36	LDRB	R0,[R4,#52]
	TEQ	R0,#0
	BNE	L13
L44	STRB	R5,[R4,#53]
L13	MOV	R0,R5
	LDMEA	R11,{R4,R5,R11,sp,PC}
L37	TEQ	R0,#0
	BEQ	L14
L43	MOV	R3,#0
	MOV	R2,#0x00384000
	LDR	R0,[R4,#24]
	LDR	R1,[R4,#44]
	B	L42
L14	MOV	R0,#4
L12	STRB	R0,[R4,#52]
	B	L40
L38	STRB	R3,[R4,#52]
	MOV	R3,#0
	LDR	R0,[R4,#24]

L01BACA00
	LDR	R1,[R4,#44]
	BL	0x01A6A540
	LDR	R0,D7
	BL	0x01C0E750
	B	L36
D7	DCB	"bklt"
L39	TEQ	R0,#0
	BNE	L15
L40	MOV	R3,#0
	LDR	R0,[R4,#24]
	LDR	R1,[R4,#44]
L42	BL	0x01A6A540
	B	L36
L41	TEQ	R0,#0
	BEQ	L16
L15	STRB	R1,[R4,#52]
	B	L43
L16	LDRB	R0,[R4,#53]
	TEQ	R0,#0
	LDREQ	R0,D8
	BLEQ	0x01C0E750
	STRB	R5,[R4,#52]
	B	L44
D8	DCB	"powr"
	MOV	R12,sp
	STMFD	sp!,{R4-R7,R11,R12,LR,PC}
	SUB	R11,R12,#4
	MOV	R4,R0
	MOV	R5,R1
	SUB	sp,sp,#4
	MOV	R6,#233
	SUB	R6,R6,#0x00002800

L01BACA80
	ADD	R0,R0,#4
	MOV	R7,R0
	MOV	R1,#1
	BL	0x0025A298
	TEQ	R0,#0
	BNE	0x001B0C40
	B	0x001B0C10
	LDR	R1,[R0,#92]
	LDR	R0,[R0,#100]
	CMP	R1,R0
	MOVLT	R0,#0
	MOVGE	R0,#1
	AND	R0,R0,#255
	MOV	PC,LR
	MOV	R12,sp
	STMFD	sp!,{R4-R6,R11,R12,LR,PC}
	SUB	R11,R12,#4
	MOV	R4,R0
	AND	R6,R1,#255
	LDR	R0,D15
	LDR	R0,[R0]
	LDR	R0,[R0,#8]
	CMP	R0,#3
	BCS	L45
	MOV	R0,R4
	MOV	R1,#3
	BL	0x001B0E70
	MOV	R0,R4
	BL	0x01B04254
	TEQ	R0,#0
	BNE	L45
	SUB	sp,sp,#8

L01BACB00
	MOV	R0,#0
	LDR	R1,[R4,#92]
	LDR	R2,[R4,#196]
	CMP	R1,R2
	STRLT	R0,[sp,#4]
	BLT	L17
	LDR	R2,[R4,#200]
	CMP	R1,R2
	LDRGE	R1,D16
	LDRLT	R1,D17
	STR	R1,[sp,#4]
L17	STR	R0,[sp],#-16
	ADD	R0,sp,#8
	BL	0x0013D0E0
	ADD	R0,R4,#188
	MOV	R5,R0
	SUB	sp,sp,#8
	ADD	R2,sp,#16
	LDMFD	R2,{R12,LR}
	STMEA	sp,{R12,LR}
	MOV	R1,sp
	BL	0x00070B20
	ADD	R0,sp,#8
	LDMFD	sp!,{R12,LR}
	STMEA	R0,{R12,LR}
	ADD	R1,sp,#16
	MOV	R0,sp
	BL	0x00070D80
	CMP	R0,#0
	MOVLE	R0,#0
	MOVGT	R0,#1
	TST	R0,#255

L01BACB80
	BEQ	L18
	TEQ	R6,#0
	MOV	R0,R4
	MOV	R2,#6
	MOV	R1,#3
	BEQ	L19
	BL	0x00258F14
	B	L20
D15	DCD	0x0C104F48
D16	DCD	0x00167F60
D17	DCD	0x00059FD8
L19	BL	0x00258F48
L20	MOV	R0,R5
	BL	0x0013D0E0
L18	ADD	sp,sp,#24
L45	ADD	R0,R4,#4
	MOV	R1,#0
	LDMEA	R11,{R4-R6,R11,sp,LR}
	B	0x0025A298

L01BACBCC
	DCD	0x00001843
	DCD	0x00000000
	PointerRef L01BACBE4
	PointerRef 0x006425F0
	PointerRef L01BACC00
	PointerRef L01BACC4C
L01BACBE4
	DCD	0x00001C41
	DCD	0x00000000
	IntegerRef 4
	NILRef
	DCD	0x003BB31D
	DCD	0x003BB5F1
	DCD	0x003BA155 
L01BACC00
	DCD	0x00004C41
	DCD	0x00000000
	DCD	0x003B0039
	DCD	0x004A91D9
	DCD	0x004DE591
	DCD	0x004A91F9
	DCD	0x004DE861
	DCD	0x004AC841
	DCD	0x004DE8F1
	DCD	0x004DE335
	DCD	0x004E16F9
	DCD	0x004DE635
	PointerRef L01BACC7C
	DCD	0x004DDDAD
	DCD	0x004E17B1
	DCD	0x004DDD91
	DCD	0x004E1691
	DCD	0x004DE675
	DCD	0x004E1815
L01BACC4C
	DCD	0x00003041
	DCD	0x00000000
	DCD	0x003B0039
	DCD	0x004DE591
	DCD	0x004DE861
	DCD	0x004DE8C5
	DCD	0x004DE8F1
	DCD	0x004E16F9
	PointerRef L01BACC7C
	DCD	0x004E17B1
	DCD	0x004E1691
	DCD	0x004E1815
L01BACC7C
	DCD	0x00001443 
	DCD	0x00000000
	PointerRef L01BACC90
	PointerRef 0x004E1748
	PointerRef L01BACCA8
L01BACC90
	DCD	0x00001841
	DCD	0x00000000
	IntegerRef 4
	NILRef
	PointerRef 0x003BB31C
	PointerRef 0x003BA154
L01BACCA8
	DCD	0x00002041
	DCD	0x00000000
	DCD	0x003B0039
	DCD	0x004E0139
	PointerRef L01BACCC8
	DCD	0x004E0249
	DCD	0x004E02CD
	DCD	0x004E02ED
L01BACCC8
	ObjectHeader 0x14, kFrameObject
	PointerRef L01BACCDC
	PointerRef 0x004E019C
	PointerRef L01BACCF4
L01BACCDC
	ObjectHeader 0x18, kArrayObject
	IntegerRef 4
	NILRef
	PointerRef 0x003BB31C
	PointerRef 0x00455AE4
L01BACCF4
	ObjectHeader 0x1C, kFrameObject
	PointerRef L01BACD10 
	PointerRef 0x0064860C
	IntegerRef 117
	PointerRef 0x004BBAF8
	IntegerRef 0x01000A01
L01BACD10
	ObjectHeader 0x20, kArrayObject
	IntegerRef 4
	NILRef
	PointerRef 0x003BB31C
	PointerRef 0x003BA320
	PointerRef 0x004B8B24
	PointerRef 0x004210AC
	
L01BACD30
	MOV	R12,sp
	STMFD	sp!,{R4-R6,R11,R12,LR,PC}
	SUB	R11,R12,#4
	MOV	R5,R0
	MOV	R4,R1
	MOV	R6,R2
	MOV	R0,R1
	BL	0x01BD39AC
	BIC	R1,R0,#16
	LDRB	R0,[R5,#55]
	LDR	R2,[R6]
	MOV	R2,R2,LSL #6
	ORRS	R0,R0,R2,LSR #31
	MOVNE	R0,#16
	ORR	R1,R1,R0
	MOV	R0,R4
	BL	0x01BDBD98
	LDRB	R0,[R5,#55]
	TEQ	R0,#0
	MOVNE	R0,R4

L01BACD80
	LDMNEEA	R11,{R4-R6,R11,sp,LR}
	BNE	0x01BDAD24
	LDMEA	R11,{R4-R6,R11,sp,PC}
	STMFD	sp!,{R4,LR}
	AND	R3,R1,#0x00000C80
	TST	R1,#32
	ORREQ	R3,R3,#32
	TST	R1,#2
	ORRNE	R3,R3,#0x00000100
	MOV	R2,#0
	TST	R1,#0x00020000
	MOVEQ	R2,#0x00000800
	TST	R1,#16
	ORREQ	R2,R2,#128
	TST	R1,#64
	ORRNE	R2,R2,#64
	TST	R1,#0x00010000
	ORRNE	R2,R2,#0x00000200
	AND	R1,R1,#0x0000F000
	TST	R1,#0x00008000
	ORREQ	R1,R1,#0x00002000
	TST	R1,#0x00004000
	ORREQ	R1,R1,#0x00001000
	LDR	R0,[R0,#128]
	ADD	R12,R0,#0x00002000
	LDR	R4,[R12]
	MVN	LR,#0x00000DA0
	AND	LR,R4,LR
	ORR	R3,LR,R3
	STR	R3,[R12]
	ADD	R3,R0,#0x00002400
	LDR	R12,[R3]

L01BACE00
	MVN	LR,#0x00000AC0
	AND	R12,R12,LR
	ORR	R2,R12,R2
	STR	R2,[R3]
	ADD	R0,R0,#0x00002C00
	LDR	R2,[R0]
	MVN	R3,#0x0000F000
	AND	R2,R2,R3
	ORR	R1,R2,R1
	STR	R1,[R0]
	LDMFD	sp!,{R4,PC}
	LDR	R2,[R0,#128]!
	MOV	R3,R2
	ADD	R0,R2,#0x00002000
	LDR	R1,[R0]
	AND	R0,R1,#0x00000C80
	TST	R1,#32
	ORREQ	R0,R0,#32
	TST	R1,#0x00000100
	ORRNE	R0,R0,#2
	ADD	R1,R2,#0x00002400
	LDR	R1,[R1]
	TST	R1,#0x00000800
	ORREQ	R0,R0,#0x00020000
	TST	R1,#128
	ORREQ	R0,R0,#16
	TST	R1,#64
	ORRNE	R0,R0,#64
	TST	R1,#0x00000200
	ORRNE	R0,R0,#0x00010000
	ORR	R0,R0,#8
	ADD	R1,R3,#0x00002C00

L01BACE80
	LDR	R1,[R1]
	AND	R1,R1,#0x0000F000
	ORR	R0,R1,R0
	MOV	PC,LR
	LDR	R12,D18
	CMP	R12,LR
	BNE	0x002E9BA4
	BL	0x002E9BA4
	SUB	sp,sp,#4
	MOV	R2,R0
	STR	R0,[sp]
	MOV	R0,R4
	LDR	R1,[R8,#52]
	BL	0x01A3FFC4
	STRB	R0,[R6]
	MOV	R3,R7
	MOV	R1,R5
	MOV	R0,R4
	LDR	R2,[sp,#4]
	BL	0x01A3DEF0
	MOV	R3,R5
	MOV	R2,R10
	MOV	R0,R4
	LDR	R1,[R8,#52]
	BL	0x01A4001C
	LDRB	R0,[R6]
	TEQ	R0,#0
	BEQ	L22
	LDR	R2,[sp]
	LDR	R0,[R2,#10]
	MOVS	R0,R0,ASR #16
	LDREQ	R0,[R8,#48]

L01BACF00
	LDREQ	R0,[R0]
	MOVEQ	R0,R0,LSL #2
	MOVEQ	R0,R0,LSR #18
	TEQEQ	R0,#0
	BEQ	L21
	MOV	R0,R4
	ADD	R2,R8,#48
	LDMFD	R2,{R1,R2}
	BL	0x01A410E4
	MOV	R0,R4
	LDR	R1,[R8,#52]
	BL	0x01A3CE24
	MOV	R0,#0
	STRB	R0,[R6]
	LDR	R2,[sp]
	LDR	R0,[R2,#10]
	MOVS	R0,R0,ASR #16
	BNE	L22
L21	LDR	R0,[R8,#48]!
	LDR	R0,[R0]
	MOV	R0,R0,LSL #2
	MOVS	R0,R0,LSR #18
	BNE	L22
	MOV	R1,R5
	MOV	R0,R4
	LDR	R2,[sp,#4]
	BL	0x01A431A8
	MOV	R1,R0
	MOV	R0,R4
	LDR	R2,[R5]
	BL	0x002E9BA4
	MOV	R2,R0

L01BACF80
	MOV	R3,R6
	MOV	R1,R7
	MOV	R0,R4
	BL	0x01A3DEDC
	LDRB	R0,[R6]
	TEQ	R0,#0
	BEQ	L22
	MOV	R1,R5
	MOV	R0,R4
	LDR	R2,[sp,#4]
	BL	0x01A410B0
	MOV	R1,R0
	MOV	R0,R4
	LDR	R2,[R5]
	BL	0x002E9BA4
	MOV	R2,R0
	MOV	R1,R5
	MOV	R0,R4
	LDR	R3,[sp,#4]
	BL	0x01A3CE60
	STRB	R0,[R6]
L22	ADD	sp,sp,#4
	B	0x002E6B9C
D18	DCD	0x002E6ADC

	FILL 8,0xDEADC0DE

	END
